/** Notice * This file contains works from many authors under various (but compatible) licenses. Please see core.txt for more information. **/
(function(){(window.wpCoreControlsBundle=window.wpCoreControlsBundle||[]).push([[13],{529:function(wa,sa,r){function pa(){return!1}function na(z,ca,ea){if(!(ca in w))return!0;ca=w[ca];for(var ba=0;ba<ca.length;ba++){var fa=z;var aa=ca[ba];var ma=ea;if(aa.name in fa){var la="",ja=!1;fa=fa[aa.name];switch(aa.type){case "s":la="String";ja=Object(ka.isString)(fa);break;case "a":la="Array";ja=Object(ka.isArray)(fa);break;case "n":la="Number";ja=Object(ka.isNumber)(fa)&&Object(ka.isFinite)(fa);break;case "o":la="Object",
ja=Object(ka.isObject)(fa)&&!Object(ka.isArray)(fa)}ja||ma.reject('Expected response field "'+aa.name+'" to have type '+la);aa=ja}else ma.reject('Response missing field "'+aa.name+'"'),aa=!1;if(!aa)return!1}return!0}function oa(z){for(var ca=0,ea=["locale","excelMaxAllowedCellCount","applyPageBreaksToSheet","excelDefaultCellBorderWidth","displayChangeTracking"];ca<ea.length;ca++){var ba=ea[ca],fa=ba;ba=ba.charAt(0).toUpperCase()+ba.slice(1);z[fa]&&(Object.defineProperty(z,ba,Object.getOwnPropertyDescriptor(z,
fa)),delete z[fa])}return z}r.r(sa);var ia=r(0),ka=r(1);r.n(ka);var ha=r(3);wa=r(51);var y=r(29),x=r(547),f=r(113),e=r(439),a=r(49),b=r(195),h=function(){function z(){this.request=this.result=null;this.state=0;var ca=this;ca.promise=new Promise(function(ea,ba){ca.resolve=function(){if(0===ca.state||4===ca.state)ca.state=1,ca.result=arguments[0],ea.apply(null,arguments)};ca.reject=function(){if(0===ca.state||4===ca.state)ca.state=2,ba.apply(null,arguments)}})}z.prototype.hw=function(){return 1===(this.state&
1)};z.prototype.Pra=function(){return 2===(this.state&2)};z.prototype.pk=function(){return!this.Pra()&&!this.hw()};z.prototype.qra=function(){return 4===(this.state&4)};z.prototype.MS=function(){this.state|=4};return z}(),n=function(){function z(){this.Sv={};this.hc=[]}z.prototype.pop=function(){var ca=this.hc.pop();this.Sv[ca.key]=void 0;return ca};z.prototype.push=function(ca,ea){ea={key:ca,data:ea};this.hc.push(ea);this.Sv[ca]=ea.data};z.prototype.contains=function(ca){return!!this.Sv[ca]};z.prototype.get=
function(ca){return this.Sv[ca]};z.prototype.set=function(ca,ea){var ba=this;this.Sv[ca]=ea;this.hc.forEach(function(fa,aa){fa.key===ca&&(ba.hc[aa]=fa)})};z.prototype.remove=function(ca){var ea=this;this.Sv[ca]=void 0;this.hc.forEach(function(ba,fa){ba.key===ca&&ea.hc.splice(fa,1)})};z.prototype.length=function(){return this.hc.length};return z}(),w={pages:[{name:"pages",type:"a"}],pdf:[{name:"url",type:"s"}],docmod:[{name:"url",type:"s"},{name:"rID",type:"s"}],health:[],tiles:[{name:"z",type:"n"},
{name:"rID",type:"n"},{name:"tiles",type:"a"},{name:"size",type:"n"}],cAnnots:[{name:"annots",type:"a"}],annots:[{name:"url",type:"s"},{name:"name",type:"s"}],image:[{name:"url",type:"s"},{name:"name",type:"s"},{name:"p",type:"n"}],text:[{name:"url",type:"s"},{name:"name",type:"s"},{name:"p",type:"n"}],ApString2Xod:[{name:"url",type:"s"},{name:"rID",type:"s"}]};r=function(){function z(ca,ea,ba){var fa=this;this.sT=this.l_=!1;this.ui=this.gK=this.Bx=this.tf=this.Ty=this.Eq=this.Sy=this.Yo=null;this.Ao=
new h;this.Tr=new h;this.zF=!1;this.Eg=this.xf=this.yf=this.rg=null;this.$g=[];this.nG=[];this.cache={};this.timeStamp=0;this.oi=[];this.yk=[];this.fO=null;this.YZ=!1;this.A7=this.id=null;this.GQ=this.t2=pa;this.nj=0;this.FP=!1;this.u4=1;this.vk={};this.Ku=0;this.Lw=new n;ea.endsWith("/")||(ea+="/");ba=ba||{};this.l_=ba.disableWebsockets||!1;this.sT=ba.singleServerMode||!1;null!=ba.customQueryParameters&&Object(a.b)("wvsQueryParameters",ba.customQueryParameters);ea.endsWith("blackbox/")||(ea+="blackbox/");
this.Yo=ba.uploadData||null;this.Bx=ba.uriData||null;this.Sy=ba.cacheKey||null;if(this.Eq=ba.officeOptions||null)this.Eq=oa(this.Eq);this.tf=ba.rasterizerOptions||null;this.Ty=ba.cadOptions||null;this.Tf=ea;this.DN=ca;this.Pq(!0);this.bv=(new x.a(ea,null,this.Zi())).Fma(!this.l_,function(aa){fa.Ita(aa)},function(){return null},function(){fa.zF=!1},function(){fa.fxa()})}z.prototype.Pia=function(){var ca=this;return new Promise(function(ea,ba){var fa=new XMLHttpRequest;fa.open("GET",ca.Tf+"ck");fa.withCredentials=
ca.Zi();fa.onreadystatechange=function(){fa.readyState===XMLHttpRequest.DONE&&(200===fa.status?ea():ba())};fa.send()})};z.prototype.Xya=function(ca){this.t2=ca||pa;this.GQ=pa};z.prototype.lha=function(){this.X6();return this.bv.ks(!0)};z.prototype.X6=function(){Object(ia.b)(this,void 0,void 0,function(){return Object(ia.d)(this,function(ca){switch(ca.label){case 0:return this.Tr=new h,this.Ao=new h,this.zF=!1,this.id=null,this.YZ=!1,[4,this.Pia()];case 1:return ca.ba(),[2]}})})};z.prototype.fxa=function(){this.t2();
this.X6();this.rg&&(this.rg.pk()?this.zi(this.rg.request):this.rg.hw()&&this.GQ(this.rg.result.url,"pdf")&&(this.rg=null,this.V6()));this.Eg&&this.Eg.pk()&&this.zi(this.Eg.request);this.yf&&this.yf.pk()?this.zi(this.yf.request):this.xf&&this.xf.pk()&&this.a2();var ca;for(ca=0;ca<this.oi.length;ca++)this.oi[ca]&&(this.oi[ca].pk()?this.zi(this.oi[ca].request):this.oi[ca].hw()&&this.GQ(this.oi[ca].result.url,"image")&&(this.oi[ca]=null,this.WI(Object(ka.uniqueId)(),ca)));for(ca=0;ca<this.yk.length;ca++)this.yk[ca]&&
this.yk[ca].pk()&&!this.yk[ca].qra()&&this.zi(this.yk[ca].request);for(ca=0;ca<this.$g.length;ca++)this.$g[ca]&&this.$g[ca].pk()&&this.zi(this.$g[ca].request)};z.prototype.Qqa=function(){return this.zF?Promise.resolve():(this.zF=!0,this.timeStamp=Date.now(),this.bv.rH())};z.prototype.VBa=function(){var ca=this,ea,ba,fa,aa,ma;return new Promise(function(la,ja){if(ca.Yo)ea=new FormData,ea.append("file",ca.Yo.fileHandle,ca.Yo.fileHandle.name),ca.Eq&&ea.append("officeOptions",JSON.stringify(ca.Eq)),ca.tf&&
ea.append("rasterizerOptions",JSON.stringify(ca.tf)),ca.Ty&&ea.append("cadOptions",ca.Ty.getJsonString()),ca.Sy&&ea.append("cacheKey",ca.Sy),ba=ca.Yo.loadCallback,aa="upload",fa=ca.Yo.extension;else if(ca.Bx)ea={uri:ca.Bx.uri,rGa:ca.Bx.shareId},ea=Object.keys(ea).map(function(ta){return ta+"="+(ea[ta]?encodeURIComponent(ea[ta]):"")}).join("&"),ma="application/x-www-form-urlencoded; charset=UTF-8",ba=ca.Bx.loadCallback,aa="url",fa=ca.Bx.extension;else{la();return}var ra=new XMLHttpRequest,qa=Object(y.k)(ca.Tf,
"AuxUpload");qa=Object(b.a)(qa,{type:aa,ext:fa});ra.open("POST",qa);ra.withCredentials=ca.Zi();ma&&ra.setRequestHeader("Content-Type",ma);ra.addEventListener("load",function(){if(ra.readyState===ra.DONE&&200===ra.status){var ta=JSON.parse(ra.response);ca.DN=ta.uri;ba(ta);la(ta)}});ra.addEventListener("error",function(){ja(ra.statusText+" "+JSON.stringify(ra))});ca.Yo&&null!=ca.Yo.onProgress&&(ra.upload.onprogress=function(ta){ca.Yo.onProgress(ta)});ra.send(ea)})};z.prototype.Uwa=function(ca){this.password=
ca||null;this.Ao.hw()||(this.Ao=new h,this.zi({t:"pages"}));return this.Ao.promise};z.prototype.SB=function(ca){this.fO=ca||null;this.Ao.hw()||this.zi({t:"pages"});return this.Ao.promise};z.prototype.dz=function(ca){ca=Object.assign(ca,{uri:encodeURIComponent(this.DN)});this.fO&&(ca.ext=this.fO);this.ui&&(ca.c=this.ui);this.password&&(ca.pswd=this.password);this.Sy&&(ca.cacheKey=this.Sy);this.Eq&&(ca.officeOptions=this.Eq);this.tf&&(ca.rastOptions=this.tf);this.Ty&&(ca.cadOptions=this.Ty.mImpl);return ca};
z.prototype.Jxa=function(){0<this.Lw.length()&&10>=this.Ku&&this.Kxa(this.Lw.pop().data)};z.prototype.zga=function(ca){0<this.Lw.length()&&this.Lw.contains(ca)&&this.Lw.remove(ca)};z.prototype.zi=function(ca){ca=this.dz(ca);this.bv.send(ca)};z.prototype.v7=function(ca,ea){10<this.Ku?this.Lw.push(ca,ea):(this.Ku++,ca=this.dz(ea),this.bv.send(ca))};z.prototype.Kxa=function(ca){this.Ku++;ca=this.dz(ca);this.bv.send(ca)};z.prototype.En=function(ca){return ca};z.prototype.s2=function(ca){this.sT&&ca?Object(ha.j)("Server failed health check. Single server mode ignoring check."):
!this.xEa&&ca&&3>=this.nj?(this.FP=!0,this.bv.ks()):3<this.nj&&(this.sT=!0)};z.prototype.Ita=function(ca){var ea=this,ba=ca.data,fa=ca.err,aa=ca.t;switch(aa){case "upload":fa?this.WBa.reject(fa):this.WBa.resolve("Success");break;case "pages":fa?this.Ao.reject(fa):na(ba,aa,this.Ao)&&this.Ao.resolve(ba);break;case "config":if(fa)this.Tr.reject(fa);else if(na(ba,aa,this.Tr)){this.s2(ba.unhealthy);ba.id&&(this.id=ba.id);if(ba.auth){var ma=Object(a.a)("wvsQueryParameters");ma.auth=ba.auth;Object(a.b)("wvsQueryParameters",
ma)}ba.serverVersion&&(this.gK=ba.serverVersion,Object(ha.h)("[WebViewer Server] server version: "+this.gK));ba.serverID?(this.nj=ba.serverID===this.A7&&this.FP?this.nj+1:0,this.A7=ba.serverID):this.nj=0;this.FP=!1;this.Tr.resolve(ba)}break;case "health":fa?this.Tr.reject(fa):na(ba,aa,this.Tr)&&this.s2(ba.unhealthy);break;case "pdf":ba.url=Object(b.a)(this.Tf+"../"+encodeURI(ba.url));fa?this.rg.reject(fa):na(ba,aa,this.rg)&&this.rg.resolve(ba);break;case "ApString2Xod":ba.url=Object(b.a)(this.Tf+
"../data/"+encodeURI(ba.url));fa?this.vk[ba.rID].reject(fa):na(ba,aa,this.vk[ba.rID])&&this.vk[ba.rID].resolve(ba);break;case "docmod":ba.url=Object(b.a)(this.Tf+"../"+encodeURI(ba.url));fa?this.vk[ba.rID].reject(fa):na(ba,aa,this.rg)&&this.vk[ba.rID].resolve(ba);break;case "xod":if(fa)this.yf&&this.yf.pk()&&this.yf.reject(fa),this.xf&&this.xf.pk()&&this.xf.reject(fa);else if(ba.notFound)ba.noCreate||this.yf&&this.yf.pk()&&this.yf.resolve(ba),this.xf&&this.xf.pk()&&this.xf.resolve(ba);else{ba.url&&
(ba.url=Object(b.a)(this.Tf+"../"+encodeURI(ba.url)));if(!this.xf||this.xf.hw())this.xf=new h,this.xf.request={t:"xod",noCreate:!0};this.yf||(this.yf=new h,this.yf.request={t:"xod"});this.xf.resolve(ba);this.yf.resolve(ba)}break;case "cAnnots":ma=this.Eg;if(fa)ma.reject(fa);else if(na(ba,aa,ma)){ma.MS();var la=[],ja=ba.annots;ba=function(Ja){var Ga=ja[Ja].s,Da=ja[Ja].e,La=ra.Tf+"../"+encodeURI(ja[Ja].xfdf),Ca="true"===ja[Ja].hasAppearance?Object(b.a)(La+".xodapp"):null,Ka=Object(ka.range)(Ga,Da+1);
la[Ja]={range:Ka,promise:new Promise(function(Pa,Ta){var Ma=new XMLHttpRequest;Ma.open("GET",Object(b.a)(La));Ma.responseType="text";Ma.withCredentials=ea.Zi();Ma.addEventListener("load",function(){Ma.readyState===Ma.DONE&&200===Ma.status&&Pa({Vt:Ma.response,rn:Ca,range:Ka})});Ma.addEventListener("error",function(){Ta(Ma.statusText+" "+JSON.stringify(Ma))});Ma.send()})}};var ra=this;for(fa=0;fa<ja.length;fa++)ba(fa);ma.resolve(la)}break;case "annots":if(fa)this.Eg.reject(fa);else if(na(ba,aa,this.Eg)){this.Eg.MS();
var qa=new XMLHttpRequest;ma=this.Tf+"../"+encodeURI(ba.url);var ta=ba.hasAppearance?Object(b.a)(ma+".xodapp"):null;qa.open("GET",Object(b.a)(ma));qa.responseType="text";qa.withCredentials=this.Zi();qa.addEventListener("load",function(){qa.readyState===qa.DONE&&200===qa.status&&ea.Eg.resolve({Vt:qa.response,rn:ta})});qa.addEventListener("error",function(){ea.Eg.reject(qa.statusText+" "+JSON.stringify(qa))});qa.send()}break;case "image":this.Ku--;var va=this.oi[ba.p];fa?va.promise.reject(fa):na(ba,
aa,va)&&(va.result=ba,va.result.url=Object(b.a)(this.Tf+"../"+encodeURI(va.result.url)),va.resolve(va.result));break;case "tiles":this.Ku--;va=ba.rID;ma=this.$g[va];this.$g[va]=null;this.nG.push(va);if(fa)ma.reject(fa);else if(na(ba,aa,ma)){for(fa=0;fa<ba.tiles.length;fa++)ba.tiles[fa]=Object(b.a)(this.Tf+"../"+encodeURI(ba.tiles[fa]));ma.resolve(ba)}break;case "text":va=this.yk[ba.p];if(fa)va.reject(fa);else if(na(ba,aa,va)){va.MS();var ya=new XMLHttpRequest;ba=Object(b.a)(this.Tf+"../"+encodeURI(ba.url));
ya.open("GET",ba);ya.withCredentials=this.Zi();ya.addEventListener("load",function(){ya.readyState===ya.DONE&&200===ya.status&&(va.result=JSON.parse(ya.response),va.resolve(va.result))});ya.addEventListener("error",function(Ja){va.reject(ya.statusText+" "+JSON.stringify(Ja))});ya.send()}break;case "progress":"loading"===ba.t&&this.trigger(f.a.Events.DOCUMENT_LOADING_PROGRESS,[ba.bytes,ba.total])}this.Jxa();!aa&&ca.echo&&ca&&"apstring2xod"===ca.echo.t&&(ca=ca.echo.reqID)&&(2<=parseInt(this.gK,10)?
this.vk[ca].reject("Message unhandled by server"):this.vk[ca].reject())};z.prototype.wna=function(){return Object(ia.b)(this,void 0,void 0,function(){return Object(ia.d)(this,function(ca){switch(ca.label){case 0:return[4,this.Qqa()];case 1:return ca.ba(),[2,this.Tr.promise]}})})};z.prototype.bna=function(ca){for(var ea=this,ba=new XMLHttpRequest,fa=Object(b.a)(this.Tf+"aul",{id:this.id}),aa=new FormData,ma={},la=0;la<ca.body.length;la++){var ja=ca.body[la];ma[ja.id]=ja.qM.w+";"+ja.qM.h;aa.append(ja.id,
ja.qM.dataString)}ca={t:"apstring2xod",reqID:this.u4++,parts:ma};var ra=this.dz(ca);aa.append("msg",JSON.stringify(ra));this.vk[ra.reqID]=new h;ba.open("POST",fa);ba.withCredentials=this.Zi;fa=new Promise(function(qa,ta){ba.onreadystatechange=function(){4===ba.readyState&&(200===ba.status?qa():ta("An error occurred while sending down appearance strings to the server"))}});ba.send(aa);return fa.then(function(){return ea.vk[ra.reqID].promise})};z.prototype.oha=function(){var ca=this.gK.split("-")[0].split("."),
ea=["1","5","9"];if(3!==ca.length)throw Error("Invalid WVS version length.");if(3!==ea.length)throw Error("Invalid version length.");for(var ba=0;ba<ca.length;++ba){if(ea.length===ba||ca[ba]>ea[ba])return-1;if(ca[ba]!==ea[ba])return 1}return 0};z.prototype.Or=function(){return 0>=this.oha()};z.prototype.rO=function(){this.Eg||(this.Eg=new h,this.Or()?this.Eg.request={t:"cAnnots"}:this.Eg.request={t:"annots"},this.zi(this.Eg.request));return this.Eg.promise};z.prototype.WI=function(ca,ea){this.oi[ea]||
(this.oi[ea]=new h,this.oi[ea].request={t:"image",p:ea},this.v7(ca,this.oi[ea].request));return this.oi[ea].promise};z.prototype.Vwa=function(ca){this.yk[ca]||(this.yk[ca]=new h,this.yk[ca].request={t:"text",p:ca},this.zi(this.yk[ca].request));return this.yk[ca].promise};z.prototype.Wwa=function(ca,ea,ba,fa,aa){var ma=this.$g.length;this.nG.length&&(ma=this.nG.pop());this.$g[ma]=new h;this.$g[ma].request={t:"tiles",p:ea,z:ba,r:fa,size:aa,rID:ma};this.v7(ca,this.$g[ma].request);return this.$g[ma].promise};
z.prototype.V6=function(){this.rg||(this.rg=new h,this.rg.request={t:"pdf"},this.YZ?this.rg.resolve({url:this.DN}):this.zi(this.rg.request));return this.rg.promise};z.prototype.f1=function(ca){var ea=this,ba=new XMLHttpRequest,fa=Object(b.a)(this.Tf+"aul",{id:this.id}),aa=new FormData,ma={};ca.annots&&(ma.annots="xfdf");ca.watermark&&(ma.watermark="png");ca.redactions&&(ma.redactions="redact");ma={t:"docmod",reqID:this.u4++,parts:ma};ca.print&&(ma.print=!0);var la=this.dz(ma);aa.append("msg",JSON.stringify(la));
return Promise.all([ca.annots,ca.watermark,ca.redactions].map(function(ja){return Promise.resolve(ja)})).then(function(ja){var ra=ja[0],qa=ja[1];ja=ja[2];ra&&aa.append("annots",ra);qa&&aa.append("watermark",qa);ja&&aa.append("redactions",ja);ea.vk[la.reqID]=new h;ba.open("POST",fa);ba.withCredentials=ea.Zi;ra=new Promise(function(ta,va){ba.onreadystatechange=function(){4===ba.readyState&&(200===ba.status?ta():va("An error occurred while sending down annotation data to the server"))}});ba.send(aa);
return ra.then(function(){return ea.vk[la.reqID].promise})})};z.prototype.a2=function(){this.xf||(this.xf=new h,this.xf.request={t:"xod",noCreate:!0},this.zi(this.xf.request));return this.xf.promise};z.prototype.Xwa=function(){this.yf||(this.yf=new h,this.yf.request={t:"xod"},this.zi(this.yf.request));return this.yf.promise};z.prototype.Kq=function(){return!0};z.prototype.request=function(){};z.prototype.j6=function(){};z.prototype.abort=function(){for(var ca=0;ca<this.$g.length;ca++)this.$g[ca]&&
(this.$g[ca].resolve(null),this.$g[ca]=null,this.nG.push(ca));this.close()};z.prototype.jJ=function(ca){this.ui=this.ui||{};this.ui.headers=ca};z.prototype.Pq=function(ca){this.ui=this.ui||{};this.ui.internal=this.ui.internal||{};this.ui.internal.withCredentials=ca};z.prototype.Zi=function(){return this.ui&&this.ui.internal?this.ui.internal.withCredentials:null};z.prototype.getFileData=function(){return Promise.reject()};return z}();Object(wa.a)(r);Object(e.a)(r);Object(e.b)(r);sa["default"]=r},547:function(wa,
sa,r){var pa=r(0),na=r(3),oa=r(29),ia=r(49),ka=r(195),ha=r(87),y=function(){function f(e,a,b,h,n,w){void 0===b&&(b=null);void 0===h&&(h=null);void 0===n&&(n=null);void 0===w&&(w=null);this.W3=!1;this.nj=0;this.PY=this.qCa(e);this.url=a?this.PY+"/"+a:this.PY+"/ws";this.qN=b;this.oB=h;this.bz=n;this.iS=w}f.prototype.qCa=function(e){var a=e.indexOf("://"),b="ws://";0>a?a=0:(5===a&&(b="wss://"),a+=3);var h=e.lastIndexOf("/");0>h&&(h=e.length);return b+e.slice(a,h)};f.prototype.send=function(e){this.$q.readyState===
WebSocket.CLOSED||this.W3||this.$q.send(JSON.stringify(e))};f.prototype.rH=function(){return Object(pa.b)(this,void 0,void 0,function(){var e,a=this;return Object(pa.d)(this,function(){e=Object(ia.a)("wvsQueryParameters");e.bcid=Object(oa.l)(8);Object(ia.b)("wvsQueryParameters",e);return[2,new Promise(function(b,h){var n=Object(ka.a)(a.url);a.$q=new WebSocket(n);a.$q.onopen=function(){a.oB&&a.oB();b()};a.$q.onerror=function(w){a.W3=!0;h(w)};a.$q.onclose=function(w){var z=w.code;return Object(pa.b)(a,
void 0,void 0,function(){var ca=this;return Object(pa.d)(this,function(ea){switch(ea.label){case 0:return this.bz&&this.bz(),3E3===z?[3,3]:8>this.nj++?[4,new Promise(function(ba){return setTimeout(function(){return Object(pa.b)(ca,void 0,void 0,function(){return Object(pa.d)(this,function(fa){switch(fa.label){case 0:return this.iS(),[4,this.rH()];case 1:return fa.ba(),ba(),[2]}})})},3E3)})]:[3,2];case 1:return ea.ba(),[3,3];case 2:h(ha.a),ea.label=3;case 3:return[2]}})})};a.$q.onmessage=function(w){w&&
w.data&&(w=JSON.parse(w.data),w.hb?a.send({hb:!0}):w.end?close():a.qN(w))}})]})})};f.prototype.ks=function(e){void 0===e&&(e=!1);this.nj=0;e?this.$q.close(3E3):this.$q.close();return Promise.resolve()};return f}(),x=function(){function f(e,a,b,h,n,w,z){void 0===h&&(h=null);void 0===n&&(n=null);void 0===w&&(w=null);void 0===z&&(z=null);this.nj=this.VI=this.id=0;this.vA=!1;this.request=null;e=this.jva(e);this.url=a?e+"/"+a+"pf":e+"/pf";this.$J=b;this.qN=h;this.oB=n;this.bz=w;this.iS=z}f.prototype.jva=
function(e){var a=e.lastIndexOf("/");0>a&&(a=e.length);return e.slice(0,a)};f.prototype.ria=function(e){e=e.split("\n");for(e[e.length-1]&&e.pop();0<e.length&&3>e[e.length-1].length;)"]"===e.pop()&&(this.id=0);0<e.length&&3>e[0].length&&e.shift();for(var a=0;a<e.length;++a)e[a].endsWith(",")&&(e[a]=e[a].substr(0,e[a].length-1));return e};f.prototype.h7=function(){return Object(pa.b)(this,void 0,void 0,function(){var e=this;return Object(pa.d)(this,function(a){switch(a.label){case 0:return 8>this.nj++?
[4,new Promise(function(b){return setTimeout(function(){e.iS();e.rH();b()},3E3)})]:[3,2];case 1:a.ba(),a.label=2;case 2:return[2]}})})};f.prototype.lva=function(e){Object(pa.b)(this,void 0,void 0,function(){var a,b;return Object(pa.d)(this,function(h){switch(h.label){case 0:a=null,b=0,h.label=1;case 1:if(!(b<e.length))return[3,6];a=JSON.parse(e[b]);if(!a)return[3,5];if(!a.end)return[3,2];close();return[3,5];case 2:if(!a.id||Number(a.id)===this.id)return[3,4];Object(na.j)("Reconnecting, new server detected");
this.ks();return[4,this.h7()];case 3:return h.ba(),[3,5];case 4:a.hb&&Number(a.id)===this.id?this.send({hb:!0}):this.vA||this.qN(a),h.label=5;case 5:return++b,[3,1];case 6:return[2]}})})};f.prototype.Fta=function(e){Object(pa.b)(this,void 0,void 0,function(){var a,b,h;return Object(pa.d)(this,function(n){switch(n.label){case 0:if(!(3<=e.readyState))return[3,2];try{a=e.responseText.length}catch(w){return Object(na.h)("caught exception"),[2]}if(0<a)try{b=this.ria(e.responseText),0===this.id&&0<b.length&&
(h=JSON.parse(b.shift()),this.id=h.id,this.nj=0),this.lva(b)}catch(w){}return this.vA?[3,2]:[4,this.U_()];case 1:n.ba(),n.label=2;case 2:return[2]}})})};f.prototype.U_=function(){return Object(pa.b)(this,void 0,void 0,function(){var e=this;return Object(pa.d)(this,function(){return[2,new Promise(function(a,b){function h(){return Object(pa.b)(e,void 0,void 0,function(){return Object(pa.d)(this,function(w){switch(w.label){case 0:b(),this.ks(),w.label=1;case 1:return this.vA&&8>this.nj?[4,this.h7()]:
[3,3];case 2:return w.ba(),[3,1];case 3:return[2]}})})}e.request=new XMLHttpRequest;e.request.withCredentials=e.$J;var n=Object(ka.a)(e.url,0!==e.id?{id:String(e.id),uc:String(e.VI)}:{uc:String(e.VI)});e.VI++;e.request.open("GET",n,!0);e.request.setRequestHeader("Cache-Control","no-cache");e.request.setRequestHeader("X-Requested-With","XMLHttpRequest");e.request.onreadystatechange=function(){e.Fta(e.request)};e.request.addEventListener("error",h);e.request.addEventListener("timeout",h);e.request.addEventListener("load",
function(){e.oB&&e.oB();a()});e.request.send()})]})})};f.prototype.rH=function(){var e=Object(ia.a)("wvsQueryParameters");e.bcid=Object(oa.l)(8);Object(ia.b)("wvsQueryParameters",e);this.VI=this.id=0;this.vA=!1;return this.U_()};f.prototype.send=function(e){var a=this,b=new XMLHttpRequest;b.withCredentials=this.$J;var h=Object(ka.a)(this.url,{id:String(this.id)}),n=new FormData;n.append("data",JSON.stringify(e));b.addEventListener("error",function(){a.ks()});b.open("POST",h);b.setRequestHeader("X-Requested-With",
"XMLHttpRequest");b.send(n)};f.prototype.ks=function(){this.id=0;this.vA=!0;this.bz&&this.bz();this.request.abort();return Promise.resolve()};return f}();wa=function(){function f(e,a,b){this.xZ=e;this.target=a;this.$J=b}f.prototype.Fma=function(e,a,b,h,n){void 0===e&&(e=!0);void 0===a&&(a=null);void 0===b&&(b=null);void 0===h&&(h=null);void 0===n&&(n=null);return e?new y(this.xZ,this.target,a,b,h,n):new x(this.xZ,this.target,this.$J,a,b,h,n)};return f}();sa.a=wa}}]);}).call(this || window)
